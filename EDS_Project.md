<table width="1000" border="1">
<thead>
  <tr>
    <td rowspan="3"><img width="300px" src="https://github.com/user-attachments/assets/b469980a-8e2c-4d9c-b48f-cee80a543b46"></td>
    <td colspan="2" width="700"><p align="center"><b> Проект <br> Модуль "Аварийно-диспетчерская служба" (АДС) </b></p></td>
  </tr>
  <tr>
    <td>Дата</td>
    <td> 30.. .04.2025</td>
  </tr>
  <tr>
    <td>Версия</td>
    <td>1.0</td>
  </tr>
</thead>
</table>

### Работу выполнили 
|Подразделение| Фамилия И.О.|
|---|---|
|Группа 1. Модуль "Прием и обработка заявок"|*Внуков В.В.*|
|Группа 2. Модуль "Личный Кабинет"|*Мельник А.А.*|
|Группа 3. Модуль "Отчеты"|*Царев Д.И.*|


## Содержание
[1. Общая информация](#title1) <br> 
&nbsp; [1.1 Термины и определения](#title1_1) <br>
&nbsp; [1.2 Ссылки на существующую документацию, НПА](#title1_2) <br>
&nbsp; [1.3 Контекстные диаграммы](#title1_3) <br>
[2. Бизнес-требования и бизнес-правила](#title2)</br>
[3. Прочие требования](#title3) <br> 
&nbsp; [3.1 Пользовательские](#title4_1) <br>
&nbsp; [3.2 Системные](#title4_2) <br>
&nbsp; [3.3 НФТ и ограничения](#title4_1) <br>
[4. Архитектура Системы (HLD)](#title4)</br>
[5. Пользовательские сценарии. Use Cases диаграммы](#title5)</br>
&nbsp; [5.1 Модуль "Личный Кабинет"](#title5_1) <br>
&nbsp; [5.2 Модуль "Прием и обработка Заявок"](#title5_2) <br>
&nbsp; [5.3 Модуль "Отчеты"](#title5_3) <br>
[6. Пользовательские сценарии. Описание и Sequence диаграммы](#title6)</br>
<br>

## <a id="title1"> 1. Общая информация </a>
### <a id="title1_1"> 1.1. Термины и определения </a>
|Термин	|Определение|
|---|---|
|**Абонент** |*Собственник или пользователь помещения в МКД обслуживаемом **АДС***| 	
|**Аварийно-диспетчерская служба (АДС)**	|*Организация,  осуществляещая текущий контроль за работой внутридомовых инженерных систем многоквартирных домов (МКД), качества коммунальных ресурсов, а такще осуществляющую круглосуточную регистрацию и контроль выполнения **Заявок** собственников и пользователей помещений* |
|**Администратор**|*Роль. Сотрудник **АДС** выполняющий функции изменения параметров **Системы** и управления ролями пользователей **Системы***|
|**Диспетчер**	|*Роль. Сотрудник **АДС** выполняющий функции по регистрации **Заявок** и/или изменении их атрибутов и/или статусов*|
|**Дополнительные материалы**	|*текстовые, аудио, фото, видео и другие файлы, содержащие значимую информацию по существу **Заявки***|
|**Заявка**	|*Обращение собственника или пользователя помещения в МКД связанным с предоставлением коммунальных и других услуг, выполнением работ по содержанию и ремонту общего имущества или устранением неисправностей и повреждений внутридомовых инженерных систем*|
|**Заявитель** |***Абонент** или иное физическое лицо или организация обратившееся в **АДС***| 
|**Исполнитель работ (Исполнитель)**|*Роль. Сотрудник или совокупность сотрудников **АДС** или внешний подрядчик, привлекаемый **АДС** для выполнения работ/услуг по **Заявке***|
|**Отчет**	|*Шаблонизированный набор данных возвращаемых **Системой** по запросу **Пользователя***|
|**Пользователь отчетных форм (Пользователь)**	|*Роль. Сотрудник **АДС** или внешний пользователь **Системы** имеющий право получать **Отчет** для осуществления или анализа деятельности **АДС***|
|**Руководитель**	|*Частный случай роли **Пользователь отчетных форм***|
|**Система**	|*Разрабатываемая информационная система*|



### <a id="title1_2"> 1.2 Ссылки на существующую документацию, НПА </a>

|---|Наименование|Ссылка| 
|---|---|---|
|[1.]|*Постановление Правительства РФ от 15.05.2013 N 416 "О порядке осуществления деятельности по управлению многоквартирными домами"*|[см. текст](https://docs.cntd.ru/document/499020841) <br> *(с изменениями на 21 декабря 2023 года)*|
|[2.]|*Постановление Правительства РФ от 27.03.2018 N 331 (ред. от 29.07.2020) "О внесении изменений в некоторые акты Правительства Российской Федерации по вопросам осуществления деятельности по управлению многоквартирными домами и содержанию общего имущества собственников помещений в многоквартирных домах и признании утратившими силу отдельных положений некоторых актов Правительства Российской Федерации"*|[обзор](https://www.garant.ru/hotlaw/federal/1188602/) документа (ИС "Гарант")<br><br>[вносимые изменения](https://www.consultant.ru/document/cons_doc_LAW_294631/0b88710e249ab2806074e06e64d02ae3040609e9/) (ИС "Консультант")|

#### Анализ НПА
> компиляция

|п/п|О чем|Бизнес-правило|Правовая основа|Модуль|Влияние на систему| 
|---|---|---|---|---|---|
|1|Типы и сроки осмотров общего имущества|Система должна поддерживать три вида осмотров – текущие (общие и частичные), сезонные и внеочередные, с указанием дат их проведения|п. 1 «а» изменений в Правила содержания общего имущества (ПП РФ № 491), дополнение пунктом 13(1)|**не реализуется**|---|
|2|График сезонных осмотров дважды в год|планировать и напоминать о весеннем осмотре (после таяния снега) и осеннем (перед отопительным сезоном).|тот же пункт 13(1) Правил № 491, описывающий проведение сезонных осмотров дважды в год.|**не реализуется**|---|
|3|Журнал учёта технического состояния (журнал осмотра)|все выявленные дефекты и состояние элементов общего имущества фиксировать в специальном журнале осмотра.|п. 1 «б» изменений в Правила содержания (дополнение пункта 14 Правил № 491 абзацем о журнале осмотра)|**не реализуется**|---|
|4|Уведомления пользователей об осмотрах и дефектах|автоматически уведомлять абонентов о результатах осмотров и необходимости ремонта через ЛК и ГИС ЖКХ.|дополнение п. 2(1) раздела I Правил предоставления коммунальных услуг (ПП РФ № 354)|**не реализуется**|---|
|5|Ведение журнала учёта заявок с записью разговора|при регистрации заявки сохранять её в журнале или АСУ с записью телефонного разговора.|пп. «ж» п. 17 Правил № 416 – регистрация заявок с записью разговора|Личный Кабинет, Обработка Заявок, Отчеты|1.	Ссылки на аудио: в отчётах предусмотреть поле «аудиозапись»: URL или указатель хранилища. <br>2.	Сроки хранения аудио: аудиофайлы хранятся не менее 3 лет и включаются в отчёты об архиве.|
|6|Информирование о номере заявки и сроках её выполнения|при регистрации заявки в ЛК сразу показывать номер и регламентные сроки её исполнения.|п. 17(2) Правил № 416 – сообщение абоненту регистрационного номера и сроков работ |Личный кабинет, Обработка Заявок|---|
|7|Оперативный контроль качества выполнения заявок|поддерживать фотофиксацию и периодические опросы для контроля качества выполненных работ.|п. 17(4) Правил № 416 – контроль сроков и качества исполнения заявок с фотофиксацией|Обработка Заявок|Прикрепление к Заявке файлов в т.ч. медиа исполнителем работ. Организация хранения|
|8|Время ответа и локализация аварии|ответ абоненту не позднее 10 минут.|п. 13 Правил № 416 – регламентированные сроки ответа и локализации аварий|Личный Кабинет, Обработка Заявок, Отчеты|Расчёт SLA-метрик: для каждого обращения отчёт должен иметь поля «время поступления», «время ответа», «время локализации», «время устранения».|
|9|Уведомления через ГИС ЖКХ|Уведомления, предусмотренные настоящим постановлением, подлежат направлению в том числе с использованием государственной информационной системы жилищно-коммунального хозяйства.|Пункт 2(1) |**исключен из проекта**|---|
|10|Электронный документооборот|Документы могут вестись в том числе в форме электронных документов.|Пункт 12 |Отчеты|1.	Хранение отчётов: отчёты формируются и сохраняются в формате PDF/XLSX/XML <br> 2.	Соответствие 63-ФЗ и 152-ФЗ: отчёты хранятся в защищённом хранилище, шифруются и логируются все операции доступа.|
|11|Раскрытие информации|Управляющая организация обязана раскрывать информацию на стендах, сайтах, в ГИС ЖКХ ... Сроки: обновление — в течение 3 рабочих дней; уведомления о работах — не позже 3 рабочих дней до начала; изменение тарифов — не позже 30 календарных дней.|Пункт 31 |Отчеты|Предусмотреть возможность  генерация «открытых» отчётов в формате HTML/PDF для выгрузки на сайт и в ГИС ЖКХ.|

### <a id="title1_2"> 1.3 Контекстные диаграммы </a>

### Система АДС

> [см. в Google Draw](https://docs.google.com/drawings/d/1WK4C3f7dXRz46UVjHfCQ6sbBk8tnQkyMIweeT2CtFcc/edit?usp=sharing)

![АДС_Контекстная_диаграмма](https://github.com/user-attachments/assets/43203029-4abc-4fcc-b8f4-87c400620a40)

### Модуль "Личный Кабинет"

![Личный Кабинет](https://github.com/vnukov-vv/SA_SHIFT_DV/blob/main/FILES/Контекстная%20диаграмма.drawio.svg)

### Модуль "Отчеты"

> [см. в Google Draw](https://docs.google.com/drawings/d/1kmKBb2_9vgw7XziOYgGlHkOIZncMWC968R5Iz-mW2uQ/edit)

![Отчеты](https://github.com/vnukov-vv/SA_SHIFT_DV/blob/main/FILES/Контекстная%20диаграмма%20отчетов.svg)


## <a id="title2"> 2. Бизнес-требования и бизнес-правила </a>

### 2.1. Бизнес-требования
#### Гр.1
- *Система* должна обеспечить круглосуточную регистрацию и отработку *Заявок*;
- *Система* должна обеспечить предоставление ответа на *Заявку* не позднее 10 минут с момента поступления;
- *Система* должна обеспечить ведение журнала учёта *Заявок* в ГИС ЖКХ (**исключено из проекта**);
- В случае аварийных повреждений внутридомовых инженерных систем *Система* должна обеспечить информирование органа местного самоуправления муниципального образования, на территории которого расположен многоквартирный дом (МКД), о характере повреждения и планируемых сроках его устранения (**исключено из проекта**);
- *Система* должна консолидировать бизнес-процессы *АДС* в единое информационное пространство;
- *Система* должна увеличить скорость обработки *Заявок* от *Пользователей*.

#### Гр.2
-	Централизация учета всех обращений - Объединить в единой системе регистрацию, хранение и управление обращениями жильцов, собственников и специалистов УК.
- Ускорение реакции на аварийные и плановые запросы - Автоматизировать приоритизацию, распределение и планирование работ, чтобы сократить время от обращения до выполнения.
- Повышение прозрачности и контроля процессов - Обеспечить сквозную видимость статусов заявок и истории взаимодействий для всех участников: диспетчеров, исполнителей и абонентов.
- Аналитика и оптимизация работы - Собрать метрики по количеству, типам и срокам заявок для формирования регулярных отчетов и принятия управленческих решений для улучшения работы системы.

### Гр.3
- Поддержка ключевых ролей - Система должна обеспечивать разграничение доступа для трех основных ролей:
  + Диспетчеры (приём, распределение и контроль заявок)
  + Руководитель компании (анализ общей статистики и принятие решений)
  + Исполнители (сотрудники, ремонтные бригады — получение заданий)
- Запросный режим формирования отчётов – Отчёты должны формируются по запросу пользователя. 
- Гибкость по периодам и адресным группировкам
  + Возможность выбирать произвольный временной интервал (дата/время начала и окончания).
  + Разбивка отчёта по уровням адреса: дом → подъезд → квартира.
- Структура и содержимое отчёта
  + Данные по заявкам:
    • Типы заявок: платные, бесплатные, срочные, несрочные, по виду работ (сантехника, электрика, общедомовые)
    • Статус заявки (новая, в работе, завершена, отменена)
  + Данные по сотрудникам:
    • Список задействованных исполнителей и трудозатраты каждого
    • Этапы выполнения (приём → выезд → устранение → закрытие) 
  + Временные метрики:
    • Время регистрации заявки
    • Время начала работ и время фактического окончания
    • Продолжительность устранения аварии
  + Материальные затраты:
    • Объёмы и стоимость использованных материалов (при наличии учёта в системе)
- Доступность и доставка отчётов
  + Формат: PDF и/или XLSX для выгрузки на компьютер.
  + Отображение непосредственно в веб- или мобильном приложении.
- Формирование заданий исполнителям - – Возможность создавать и назначать наряды/задания на основе аналитических данных и отчётов прямо из системы.

### 2.2. Бизнес-правила

#### Гр.2
-	Только зарегистрированный владелец квартиры может подавать заявку через личный кабинет.
-	Приоритет аварийных заявок выше, чем у плановых заявок, независимо от времени подачи.
-	В случае отклонения заявки жильцу обязательно отправляется уведомление с указанием причины отказа.
-	Вся переписка по заявке сохраняется в системе и не может быть удалена ни одной из сторон.
-	Регистрация новой заявки доступна только при наличии у абонента актуального договора обслуживания с УК.
-	Помещения (адрес, тип, номер, ФИО, телефон) заводятся в ЛК один раз и сохраняются в профиле пользователя.
-	Новую заявку можно создать только привязав к ней одно из сохранённых в ЛК помещений.
-	Причина обращения выбирается из справочника с автодополнением (категории: бесплатная/платная/аварийная).
-	Стоимость платной заявки определяется на основании выбранной причины и кодируется при создании.
-	Тип оплаты заявки (предоплата / постоплата) зависит от выбранной категории или причины обращения.
-	Если предоплатная заявка не будет оплачена в течение 1 часа после подтверждения диспетчера — она автоматически аннулируется, пользователь получает уведомление.
-	Оплата заявки возможна только после её регистрации и только в статусе «Не оплачена».
-	Отказ в оплате или сбой платёжного шлюза — заявка остаётся в статусе «Не оплачена», пользователь получает уведомление.

#### Гр.3
- Хранение отчётов не менее 3 лет - Все отчёты по обращениям и авариям должны сохраняться в архиве системы в течение не менее 3 лет с даты их формирования (п. 38 Правил № 416).
- Учет электронного документооборота - Отчёты могут формироваться и храниться в электронном виде (PDF/CSV/XML) с возможностью электронной подписи (п. 12 изменений ПП № 331).
- Фиксация времени реакции и устранения - Для каждого обращения расчёт фактического времени ответа, локализации аварии и устранения (не более 5 мин/30 мин/3 сут) и признак нарушения SLA (п. 13 изменений ПП № 331).
- Привязка аудиозаписи звонка - В отчётах указывать ссылку на аудиозаписи телефонного разговора при регистрации заявки (п. 17 изменений ПП № 331).
- Отчётность по типам заявок - Разграничивать аварийные, профилактические и иные заявки, формировать сводную статистику по каждому типу.
- Контроль полноты данных - Обязательное наличие в отчёте атрибутов «канал подачи», «дата/время регистрации», «статус уведомления», «ответственный исполнитель».
- Автоматическое оповещение о просроченных заявках - Отчёты должны включать отдельный раздел «Нарушенные сроки» с детализацией (номер заявки, заявитель, фактические и нормативные сроки).
- Периодические сводные отчёты - Формировать месячные и квартальные отчёты по количеству обращений, уровню соблюдения SLA и времени устранения.
- Отчёты для публикации публичной информации - Экспорт в формате, пригодном для вывесок, информационных стендов и загрузки в ГИС ЖКХ, с учётом сроков публикации (3 рабочих дня для обновления, 3 рабочих дня до мероприятий, 30 календарных дней до изменения тарифов — п. 31 Правил № 416).
- Отчёты по запросу - формируются только по явному запросу пользователя (диспетчера или руководителя), автоматическое расписание генерации в рамках данного этапа не допускается.
- Детализация по объекту - любой отчёт должен содержать возможность детализации данных по домам, подъездам и квартирам, указанным в заявках.
- Классификация заявок - Все заявки в отчёте классифицируются по трём осям: платность (платные/бесплатные), срочность (срочные/несрочные) и вид работ (сантехника, электрика, общедомовые).
- Отображение временных метрик - Каждая запись в отчёте обязательно включает метки «время регистрации», «время начала работ» и «время завершения работ».
- Учёт трудозатрат - Отчёт должен содержать данные по трудозатратам исполнителей, разбивая их по этапам работ (приём, выезд, устранение, закрытие).
- Учёт расхода материалов - Все использованные в рамках заявки материалы фиксируются в отчёте с указанием наименования, количества и стоимости.
- Визуализация данных - Модуль обязан строить визуализации — таблицы, линейные и круговые диаграммы, отражающие ключевые метрики отчёта.
- Уведомления о готовности - После формирования отчёта система отправляет push-уведомление 
- Контроль доступа - к просмотру и формированию отчётов регулируется ролями (диспетчер, руководитель) и осуществляется только по протоколу HTTPS.


## <a id="title3"> 3. Прочие требования </a>

### <a id="title3_1"> 3.1. Пользовательские </a>

#### Гр.1
- *Пользователь* с ролью *Администратор* должен иметь возможность управления доступами, правами других *Пользователей*;
- *Пользователь* с ролью *Администратор* должен иметь возможность изменять параметры *Системы*;
- *Пользователь* с ролью *Диспетчер* должен иметь возможность работать с разными типами *Заявок*;
- *Пользователь* с ролью *Диспетчер* должен иметь возможность изменять атрибуты и статусы *Заявок*;
- *Пользователь* с ролью *Исполнитель работ* должен иметь возможность просмотра *Заявок*.

#### Гр.2
-	Пользователь может создать и сохранить в ЛК несколько «помещений» с полями: улица, дом, тип (кв/паркинг/кладовка/офис), номер помещения, ФИО (опционально), телефон (опционально).
-	При авторизации в ЛК пользователь видит список своих помещений и может добавить новое или отредактировать существующее.
-	При создании заявки в форме выбирается одно из сохранённых помещений.
-	Форма заявки содержит выпадающий список «Причина обращения» с поиском и маркировкой по категориям (бесплатная/платная/аварийная).
-	В карточке неоплаченной одобренной заявки отображается таймер обратного отсчета (для предоплатной заявки) и кнопка перехода к оплате.
-	После выбора причины система автоматически показывает рассчитанную цену (для платных заявок).
-	Пользователь может добавить комментарий и прикрепить файлы (до 50 МБ).
-	Пользователь может просматривать и фильтровать список заявок не только по статусу обработки, но и по статусу оплаты.

#### Гр.3
- Руководитель и диспетчер должны иметь возможность выбирать произвольный временной интервал (дата/время начала и окончания) для отчёта.
- Руководитель должен видеть в списке доступных отчётов «Сводка по заявкам», «По исполнителям» и «По материалам».
- При отсутствии данных за выбранный период система должна информировать пользователя сообщением «Заявок не найдено».
- Руководитель и диспетчер должны иметь возможность уточнить отчёт по конкретному адресу (дом/подъезд/квартира) одним кликом.
- Руководитель и диспетчер должны получать push-уведомление в приложении о готовности сформированного отчёта.
- Руководитель и диспетчер должен уметь строить отчёты, ограничивая выборку конкретными географическими областями (дом, подъезд, квартира или иной участок), чтобы оперативно отвечать на запросы управляющих организаций.

### <a id="title3_2"> 3.2. Системные </a>

#### Гр.1
- В *Системе* должна быть реализована возможность управления *Заявками*;
- В *Системе* должна быть реализована возможность хранения *Дополнительных материалов* к *Заявкам*.

#### Гр.2
= Управление помещениями
  +	CRUD-интерфейс для адресов/помещений пользователя.
  +	Сохранение помещения с валидацией адреса (автодополнение по базе).
- Создание заявки
  + Выбор помещения из выпадающего списка.
  + Динамический справочник «Причина обращения» с автодополнением и привязкой к категории.
  + Автоподстановка цены в зависимости от причины (чтение из справочника цен).
  + Поля: комментарий, загрузка фото/видео/аудио (до 50 МБ).
- Оплата заявки
  + Платёжный счёт для заявок формируется только после подтверждения от АДС (статус "Принята").
  + Кнопка «Оплатить картой» (интеграция с платёжным шлюзом).
  + Обновление статуса оплаты в реальном времени через webhook от платёжного шлюза.
  + Добавить таймер обратного отсчета на сутки с момента получения подтверждения заявки — по истечении времени заявка переходит в статус «Аннулирована».
  + В списке заявок предоплатные неоплаченные заявки выделяются красным цветом, содержат таймер и кнопку «Оплатить».
- Просмотр и фильтрация заявок
  + Список заявок с колонками: №, помещение, причина, цена, статус обработки, статус оплаты, дата создания.
  + Фильтры по статусам: обработки (Принята/В работе/Назначен исполнитель/Готова) и оплаты (Оплачена/Не оплачена).
  + Карточка заявки с деталями и историей изменений.

#### Гр.3
- Модуль отчётов должен отправлять SQL-запросы в базу данных для выборки заявок по заданному периоду и фильтрам (тип заявки, адрес).
- При формировании отчёта система должна агрегировать данные по категориям: платные/бесплатные, срочные/несрочные, виды работ.
- Модуль должен вычислять и отображать трудозатраты каждого исполнителя по этапам (приём → выезд → устранение → закрытие).
- Система должна строить графики динамики количества заявок и расхода материалов на основе выбранных фильтров.
- При экспорте отчёта система должна генерировать файлы в форматах PDF и XLSX по запросу пользователя.


### <a id="title3_3"> 3.3. НФТ и ограничения </a>

#### Гр.1
- *Система* должна иметь совместимость с сертифицированными операционными системами;
- Расчетное время выполнения *Заявки* не должно превышать срок описанный в НПА (бизнес-правило).

#### Гр.2
- Доступность и отказоустойчивость - Система должна быть доступна 24/7 с минимальным временем простоя (SLA не ниже 99,5 %).
- Удобный интерфейс - Адаптивный веб-интерфейс для диспетчеров и абонентов.
- Безопасность и разграничение прав - Аутентификация и авторизация по ролям: диспетчер, исполнитель, абонент; шифрование персональных данных и файлов.
- Интеграция по API - REST- или gRPC-интерфейсы для приёма заявок из внешних систем и передачи статусов в «Личный кабинет».
- Хранение мультимедиа -  Компактно хранить и оперативно извлекать фотографии, аудио- и видеозаписи заявок.
- Масштабируемость - Поддержка роста нагрузки до нескольких тысяч обращений в сутки без просадки производительности.
-	ЛК должен корректно работать в браузерах Chrome (90+), Safari (13+), Edge (90+) и Firefox (85+).
-	Максимальный размер одного загружаемого файла – 50 МБ.
-	Время восстановления сервиса после сбоя не должно превышать 2 часов.
-	Для регистрации заявки требуется обязательная авторизация пользователя через портал госуслуг.

#### Гр.3
- Доступность - Сервис отчётов должен быть доступен не менее 99,5 % времени (uptime) для бесперебойной работы *Диспетчеров* и *Руководителей*;
- Надёжность - В случае сбоя БД или внутренних ошибок модуль обязан корректно откатывать транзакцию и уведомлять пользователя с возможностью повторного запуска отчёта;
- Безопасность - Доступ к модулю должен осуществляться только по HTTPS; все данные отчётов (паспортные, платёжные) шифруются;
= Удобство использовани - Данные визуализируются в виде текста, таблиц и графиков), интерфейс должен быть интуитивно понятным для *Диспетчеров* и *Руководителей*;


## <a id="title4"> 4. Архитектура Системы (HLD) </a>


> **Заявитель** не отображается т.к. не взаимодействует с системой напрямую. Легенда выключена

![](https://www.plantuml.com/plantuml/svg/ZLPVRzDM57_tfxYh9YNDiW2YUvaGecghCQbYrQ12aof5NkDIYzI9ObUZRssw3L0OHHjYQ9lO-h1tDqrR9mtDLxZt6-rtVdOyXq2nH8Xpxxddz-USUznRVc2tWksjkcLzudhhzUsQeswiprrPcAikDBp0UHHKcjYz-TvTs_MSLhAlCX6DZGrttRcowZij_ygsdyPy8ABXrP6e-l70hSRtRdqYq5gU_-wRrNlLvVaxYtSNvbUMYhDM8Lcx__MzszNbfQ-MxYnYrIheaJxN5wQjt-B_FTCspnIMBfG-nkzT7UapVQ7VOZz4N6Jv3rslQRViBUKrQexlDDNrgvSawUeJiulrI0-c4hHixw4a-E8gQ03a670XCaJcCUAxU3xHGsMUO04ym65VcL-G0wluW1BET5KHtoTw8AXA7-7nJA21YaUoqU5i1lI7bjsyxzQ2JNLDS0Ctg3jA7m832PWwLFg5VgaFrppz1wMd-P4lD0TAzy0cJEWEUMBDAoxCLQvLakQ0svkENNDQQiL-uAZRVBOA6ur6W6-elIuSmpW1kBRbwKi5ZyxDS_Euh60w081-BXhn6IWTANoFX6ZiaZwf81D_9-Um1h_Q5JseA4ISm7ucmZAEzY2ZJnbTio-WokpX7n9GDoBwE8Nm4Ifse8Tctpot2Ylei8PNNNeK5ErciwnczEzY0ZBp782VpSZgtqG8cRTKqc_qaMWoJn4Y5JqebHG8eYoi49MVmTiEMB8r08nS7PZ-1dRiiSodupOWLsb1REsRlHdqRSohMFF9wILj6D5Aef3JFyXnB3iqE8Ai_SluwGlklIjGR2kLW9b0shKjIVu2SeVIbYb0A1q9w4jt0P3jDjC1CBg7_i5BtZPeJg2ZiiBEHAEOpYovf6LPHy-r1FCrBK0QeAR5MVDu-4Z4aTclfZEEWafQcmQOZfAzh0a3GQRy32H63H6dIQSDKKHMRiwkUH-Ae-EiLrjQmVoap8ySEaEfyDqTFt2sYlwEJqDvKEP0NwxrvxhtRibv3q1QIVUWqgVG58grlCspGefbJzLA-7jwGQfTLaWmOcYN7S3xDkMBZkXCp9JE-6xWb6TkV9ePtZSL7FYJKqtwlQzuzeZD0VBO91_v5SzPfLzXylnBmeUcdKx5dx5Lc3HYIczXaWvU3SA6RuWCcxy01mAi2So4Ceh50dwSZkMkUGNm89ffSyA7Gk-pGjn7a84LtQEDXOmnaP2miZIQzWx5yFvtfN0e_JYZwJ3VwsJISgn2QqHbgCEuGMH0OIKpgR5GLg8Qcqaz9kLxZS3Tc8A6LrsSx-7yC2rkFziVo9zQsuMgC_JgzFGwPqsdPzWaXmSk-_St23pCLlOLbEt6Hx9zXL7FdlheIq8SxAMk8DdJySkNKoEDwd7i7JDEzlH8fM_g9sFn5S1zwzJZ4O-PcXqdlBZnv4n66qbZHv9sqvQEbq7z_qno6ov9jHa4JN_Y01erHxmbyMI9uP0ZNi9ZAldZoKJ2Sx6fBlAra3z_TJMUstcFn9ePYuRAgO7Xl7lvmzChaqlsCby5-KNSShoQ_5Nz7m00)

<details><summary> Развернуть код </summary>

```plantUML
@startuml

!include <c4/C4_Context.puml>
!include <c4/C4_Container.puml>
 
!include <office/Users/user.puml>
!include <office/Users/online_user.puml>
!include <office/Users/mobile_user.puml>

LAYOUT_LANDSCAPE()
'LAYOUT_WITH_LEGEND()

'плотность по горизонтали
skinparam nodesep 30
'плотность по вертикали
skinparam ranksep 50

'ограничиваем ширину элементов (текст без переноса)
skinparam wrapWidth 150

title Система АДС\nКонтекстная диаграмма \n(C4.1.Context)
'header Page Header
'footer


'3 параметра: ключ, заголовок и описание.

'исключим т.к. не взаимодействует с ситемой напрямую
'Person_Ext(app, "Заявитель", "Подает **Обращения** через разные каналы\nОтслеживает статус")

Person(dsp, "Диспетчер", "Регистрирует **Обращения** от **Заявителей**")
Person(adm, "Администратор", "Администратор **Системы** \n(Пользователи, Параметры)")
Person_Ext(contr, "Исполнитель\nработ", "Выполняет работы по **Заявкам**")
Person_Ext(user, "Пользователь", "(роль)\nПользователь отчетных форм")

System(sys, "Аварийно-диспетчерская служба\n(АДС)", "Обработка **Обращений**, управление **Заявками**")
System_Ext(site,"<$online_user> \nЛичный кабинет\nабонента ЖКХ", "Страница 'Аварийная служба'")
System_Ext(mob,"<$mobile_user> \nМобильное приложение\n'Квартплата+'", "Вкладка 'Заявки'")


System_Ext(pay, "Сервис оплаты", "Интеграция с учетной системой, банками")
System_Ext(notify, "Сервис уведомлений", "Обратная связь через различные каналы")
System_Ext(gis, "ГИС ЖКХ", "Журнал **Заявок**")


'3 параметра: ключ одной сущности, ключ другой тип отношений.

'Rel(app, dsp, "Использует", "Аналоговый канал")
'Rel(app, site, "Использует", "https")
'Rel(app, mob, "Использует", "https")

Rel(dsp, sys, "Использует", "https")
Rel(site, sys, "Использует", "https")
Rel(mob, sys,"Использует", "https")

Rel_D(adm, sys, "Использует", "https")
Rel_U(contr, sys, "Использует", "https")


Rel(sys, gis, "Использует", "https")
Rel(sys, pay, "Использует", "https")
Rel(sys, notify, "Использует", "https")

Rel_L(user, sys, "Использует", "https")

@enduml
```

</details>

> В сокращенном виде для иллюстрации взаимодействия модулей (сервисов) **Системы**

![Архитектура](https://www.plantuml.com/plantuml/svg/bLRjJXj75Fs_Jp5rAzcc1jA6_gbG50gegOHIKeAYIaZMWfUmmgmTxreDgYevq9PKf4a_gZIY4HMg-dyXE3OsWLUuyqOzHsDFjql1JYIokpDtpZdtuzwnSpECt5fKtoWxpZj-i5AkbpmrkJ8nFZrHdAu4aVSm6gjYzyR_xhf-uDLw-ofXKLbTzLUyySNGguNZzT3QN69H2Se0AWustAWi--N_63fpKrz-ldYtE3TrUsPXUcf-DfTtihsrUv_TlLMSc_rqzlOCLfsid4jNplIMlC7_Z_IMVgAmTARa5RuRqfQMdCaRxCUmQplXkXzKtPgxeO9AoGkzghf-xGgG8sdg1jRRqha0K7E3TG9yT0qoGF8AT34Gsde7zaTuRygfqe-n01tGiAtqZy30AluW2MUEL0xFfdJ8gkGGhorIWvKsL2DnFa7wLSsjtlDBqPhwWBoH7vKz9GVW080GEbRoa_mc1qk1xD5rYq_lOlrCoJ7Kn4Okx7bYASXDJunzE6RJZtYlUMx9gwbvzxwdRdbyTxAhbKg49_ozJfMnWO3QBRvzh12bhdwgTmfAMgG0VvTUug-ZfAtmFATK4oTfZZdEF4gW4XHd7qQv5R3N2YeZBs1nphEqedwWFbaAo267p5E6Lh_etRwLVaODwby3lMiIE38YlzDfIEXGwiX89f-aPD4Hwq_WW8F5miprEScJqmspcLyABhDJGiuTYe2ONVsTqjyAo-yKTCx2PXXv6yLFAlMWvDOsSvFlkiih9M-ra46cYCBoE66sHvaREWyaWzV0LuSUABnqzRQyXeCnycMIdC_arTTETkAjir5Gfc0koul2FriDkV8wW_G7Ivl-oOcIFOQQPGq-am-kT81qCihIjlZSaqDKFfYw1W5640DzIGnJkCWUFqt7Pl8f7U5cIBG31WP-G36a0zpc7P1jPLCEFmSgUmbRVWDnL3zA0hSIA6aXrPeVH1UaxDiYG9G7ClybvnIEmzrU_JBl08WvWFJJDEdCSgwqp8C_IqnnR6JconHSskc5EtDyf47krBswbtj0c7rJOD1pR2gT0PHZKz6zD5CrIqCwc16A0yHaxJNEc7tidLjoXX-Cts10c45gtUCe91Yn6P6hoyds37iqz2Ela9byBt6Xt82QvFbKAM4pJbOILJy7nT_qKWxqbftKtsChc-h2TBDbsSFPX21SMDHZxwsUdfSWX0GJFRmtaK-2ikc0r3IjjHHaPS_mGHZldPW2ty-QcIOThY0B7IfBnfKoaYggxkR5NkW3wbt2oGip_isiXxDjk0OxlTsVLInDh2Ik3omK5Dt69ZHWfPqY3YgHlvhc1YPUK4e0E8K6u-q9LSY-wL0GsE0UmQiMvgOjmPOPtYtfsgmsJLPn1Y7TJOcuxuU4_XKk7YIJ-no-DSoPvF17Kt3q3xwv6CDZ6nU0_O0FKyhjGiBgM3VWCKUgRGBx0-9nttjSRrzuPLF02ZCqURNn4W52RtYkHL4rX3wQq_31aBQmmqmSqfYMghHyXJM6Xh4jBfeHDvIzLMsE31PZ6CnzF_ofvA4XlNQorcyKpE032NlJNiFRcwuOqddpksFuUDtqWX9-6Vy3)


<details><summary> Развернуть код </summary>
  
```plantUML

@startuml

!include <c4/C4_Context.puml>
!include <c4/C4_Container.puml>
 
!include <office/Users/user.puml>
!include <office/Users/online_user.puml>
!include <office/Users/mobile_user.puml>

LAYOUT_LANDSCAPE()
'LAYOUT_WITH_LEGEND()

'плотность по горизонтали
skinparam nodesep 30
'плотность по вертикали
skinparam ranksep 50

'ограничиваем ширину элементов (текст без переноса)
skinparam wrapWidth 150

title Система АДС\nКонтекстная диаграмма \n(C4.2.Container)
'header Page Header
'footer


'3 параметра: ключ, заголовок и описание.

Person_Ext(contr, "Исполнитель\nработ", "Выполняет работы по **Заявкам**")
Person_Ext(user, "Пользователь", "(роль)\nПользователь отчетных форм")

System_Boundary(<#abcdef,"Аварийно-диспетчерская служба\n(АДС)") {
'4 параметра: ключ, заголовок, стек и описание.
    Container(lk, "Личный Кабинет", "Какой-то стек", "бэк личного кабинета Абонента")
    Container(sys, "Сервис обработки Заявок", "Какой-то стек", "Мастер-сервис заявок")
    Container(print, "Сервис Отчетов", "Какой-то стек", "Управляет печатью")
    ContainerDb(db, "База данных Заявок", "SQL", "")
    ContainerQueue(q, "Очередь", "отдельный топик \n на каждый тип Заявки")
}

'оставляем только "Личный Кабинет"

System_Ext(site,"<$online_user> \nЛичный кабинет\nабонента ЖКХ", "Страница 'Аварийная служба'")

'System_Ext(mob,"<$mobile_user> \nМобильное приложение\n'Квартплата+'", "Вкладка 'Заявки'")
'System_Ext(pay, "Сервис оплаты", "Интеграция с учетной системой, банками")
'System_Ext(notify, "Сервис уведомлений", "Обратная связь через различные каналы")
'System_Ext(gis, "ГИС ЖКХ", "Журнал **Заявок**")


'3 параметра: ключ одной сущности, ключ другой тип отношений.

Rel(site, lk, "Использует", "https")
Rel(lk, q, "Использует", "https")
Rel(q, sys, "Использует", "https")
Rel(sys, db, "Использует", "SQL")
Rel_U(print, db, "Использует", "SQL")

Rel(lk, print, "Использует", "https")

Rel_U(contr, print, "Использует", "https")
Rel_U(contr, sys, "Использует", "https")

'Rel(sys, gis, "Использует", "https")
'Rel(sys, pay, "Использует", "https")
'Rel(sys, notify, "Использует", "https")

Rel(user, print, "Использует", "https")

@enduml
```
  
</details>


## <a id="title5"> 5. Пользовательские сценарии. Use Cases диаграммы </a>
### <a id="title5_1"> 5.1 Модуль "Личный Кабинет" </a>

![SVG](https://www.plantuml.com/plantuml/svg/bPNHIXj158RlvoaEkR6zK2obDqL4CVMcBOZINXLacXrrSRD9ToTjfHJKrfQYe8XNBRGLNo2cXgo99gym-qRzpvOaiqnIeg3kJkPyCvp_FtyMOYqZNIi7z29MIp9Mwy-UBXRNHA0sDEaAHVxcbYRFZrH9-vLGYAbusm-hCf9b2lnGwPsgeagajofYolHCntJJVNEBltlfVdf4MEgI-OFtNPEObkcQMtnUnxv4345XnLEngjB3sVz06gQPxc8zCMq74Cbmcm4F7iqA8Kkw4b71d9XBFiyq-SnNuJrpYggwkS921wml6TVSuF4Rxp59Udo_G3BcJaH2L6LfMsugW7wOxmJQcJalq0T1L8jLISRyoONffRjWDamdFSxkwZBnbXJ8-k4JbjQVon3qbKYLSyGpb5zcn6GappIPvU8MFSzX_KR95LXjxXhksGMrFfwQ1pxnVEqGBp9UPwAxMQoY2XpKBrm80gCUOkEvcI6nq0Dz3-2soxykMD2NldgNKNFOSvIq-9OP3ezrAD102puvTnkGbY8bjLfLRtAa4zD0tt15_1vaAhESsIM_iXNPe233ZWM7k2RVgc8aDtIEUCeqzdJ6Gl5OdWDSLJ5CxJApDgA46sXwVTvd770DInw2DDejMilIrh8Vg5ZSLPL1Jxk3czgIe8qJ47aA-q5WgMIIqSIYqj8FuXpu9-fl_Xd3rNgir38igG34F2eB7LZcBgWLkUDmM5nxU3d7MkcXQOmttx9Itcj4ZVY8R2KxKVf3DIPJACl1DcM3VSKdSh2bH-XrcsS5S97B6PhnPkQjh22YnpGtvuUbeEQf-VaHk-qWc6mtHdr2jZN33XkT64volmkMImH7D4rF0s9phMLxgkrLFj5USqsMXmpyOgz2Udif9wEmZnwsV3XmH4vpt18xGuWcBR5Jeb-YtciLUaw5OuKHXn11XWRiUydVtoDiw39jKITY9gOrZ1SOcgMtvh6UavquaDdZUEaYG_1uJ8Ezj-bXUY06yj1CtWRvRYpWNwqSYBy0)


<details><summary>Развернуть код </summary>

```plantUML
@startuml UseCase_LKADS
left to right direction

'skinparam linetype ortho
'плотность по горизонтали
skinparam nodesep 30
'плотность по вертикали
skinparam ranksep 150

actor "Абонент\n(Владелец помещения)" as User

package "ЛК АДС" {
  usecase "Управлять помещениями"            as UC_ManagePrem
  usecase "Добавить помещение"               as UC_AddPrem
  usecase "Редактировать помещение"          as UC_EditPrem
  usecase "Удалить помещение"                as UC_DelPrem
  usecase "Просмотреть список помещений"     as UC_ViewPrem

  usecase "Создать заявку"                   as UC_CreateReq
  usecase "Автосохранить черновик"           as UC_SaveDraft
  usecase "Восстановить черновик"            as UC_RestoreDraft
  usecase "Прикрепить файлы"                 as UC_AttachFiles

  usecase "Просмотреть список заявок"        as UC_ViewReq
  usecase "Просмотреть детали заявки"        as UC_ViewReqDetails
  usecase "Отменить заявку"                  as UC_CancelReq
  usecase "Оплатить заявку"                  as UC_PayReq
  usecase "Оставить отзыв"                   as UC_Feedback
}

' Управление помещениями как родительский UC
UC_ManagePrem .d.> UC_AddPrem   : <<include>>
UC_ManagePrem .d.> UC_EditPrem  : <<include>>
UC_ManagePrem .d.> UC_DelPrem   : <<include>>
UC_ManagePrem .d.> UC_ViewPrem  : <<include>>

' Создание заявки
User --> UC_ManagePrem
User --> UC_CreateReq
User --> UC_ViewReq
User --> UC_ViewReqDetails
User --> UC_CancelReq
User --> UC_PayReq
User --> UC_Feedback

UC_CreateReq .d.> UC_AttachFiles     : <<include>>
UC_CreateReq .d.> UC_SaveDraft       : <<include>>
UC_CreateReq .d.> UC_RestoreDraft    : <<extend>>
UC_CreateReq .d.> UC_AddPrem         : <<include>>  ' выбор помещения
UC_CreateReq .d.> UC_ViewPrem        : <<include>>  ' выбор из списка

' Оплата заявки только для платных
UC_PayReq .> UC_CreateReq : <<extend>>
@enduml
```
</details>

### <a id="title5_2"> 5.2 Модуль "Прием и обработка Заявок" </a>

![Управление заявками](https://www.plantuml.com/plantuml/svg/VPFVQXD15CRlprCSzaQ8f92qlGbXAVW28lW0qzqnNRhP3RiJLAeGAzYB5YfIKEeVARx0AWQ3RP9NEFD6VcU538Za9fapt_cTxvkPvA1sfdBJSKxaCfTR7d0atsJjPzB83xcLkInb8NEMzzBuIspzXd0dYuZeNdsS5HDJcJ7dMM7Tyudbid979UNsYMDNSfMDZXodMMKJbvK5qM0pPk5FCVlMNmpOr6mc4sXNs7qbQvdxKt-6prchfRLg7rfbXKJBVzYaB5n5zD0ansPaENfg3wCJ49_aAyirh1e_0x06sk2xkTzIu_8GFH_bckMjVCVWfHvLzLQkCsVf9H62SRVx8jOK72hGeMgRcOWUuPYc6EK8CHpAZPwcJNedZRfSoKqSHtn2qzecfaPNRuVHjf9VybEp-GlkTC95-zUTJgHX7Z_e1QOFvhCqO9PeF8E9Sbe0_kyrNMx6zCEONOpvuj_yVTzjrhk1sGFppfy7WstSNk3smQ45yioVRsFszSe9ENadLciUy71edpbRf75Cc8bzRMltioB9fwc5G6cjBw5IZ_0qcxK-pAQWqDKFQtXI-mlYxbHhvAO3-EbVuWy0)

<details><summary>Развернуть код </summary>

```plantUML
@startuml

title : "Управление Заявками"

'skinparam linetype ortho
left to right direction

:Заявитель: as app
:Диспетчер: as dsp
:Исполнитель: as contr

Package "web"{
:МП Квартплата+: as mob
:ЛК Абонента: as site
}

app --|> dsp 
app --|> mob 
app --|> site 


Rectangle "<<Система АДС>>" {
usecase "1. Создать **Заявку**" as UC1
usecase "2. Назначить на **Исполнителя**" as UC2
usecase "3. Оценить **Заявку**" as UC3
usecase "4. Выполнить **Заявку**" as UC4
usecase "5. Закрыть **Заявку**" as UC5
}


UC2 .> UC3 : <<extend>>
UC4 .> UC5 : <<include>>

dsp --> UC1
mob --> UC1
site --> UC1

dsp --> UC2
dsp --> UC5

contr -u-> UC4

@enduml


```
</details>

### <a id="title5_3"> 5.3 Модуль "Отчеты" </a>

![SVG](https://www.plantuml.com/plantuml/svg/XPHFQnD16CRlyobUUb4FiNSFKgds929MeGT1XcGQbsmtONSYHX7IHFHWeIezU13_e3SHbfgrIxD9eP_WdM_a-r27ZferXopPsVVvpVF-cLdBh4vjVoTMiTcsPBkKHks7bbfHQfeswYPAPPqewUbKxr1FDpkwRJRj83Q4xpffnqOftRJTbFYJ6_Cnp_bGVXCktOWBdhez__b0bdRvX0itSY_bEVGVtc5PD5EU1IhrUpTQuVS0kZ6MYJz0xjx8yzKAFLNzp3HrXgZFxZdFtP0hBkK96xaRGJ7tYXNI6TrRVt37zBgf3QHVkGHSuWBXAX_0A-TYhEIZfTIDABOc3QZV-HYPmPHWwkJtaukths-iRjtStBhaKJSU_sNmYmWBdWYW4ZS52iM5G8X_WCG0p-JVBZRob5jT6sqF0ifhdlbi2BcwCP2IMeutpc66I-8AVz4XBX4FkcTUItGyU6B2iZC84v-NmF1ovb1miYF16EmXYI1ppZrrFJNQchiwwmJWZnW9DvPPAHUWptlPDD6ZC-qpfIw8dqEtZtRL3UI-KdMZIer-usem8KlZV3cM1gAZou11py8y5fmSpfNwTvKQeVdw03-fjG7URNs4zraR4BOqJ6RnQKTBmlMWBYtWmZQ3nsyPmr1oXT4wPrUY-echWlZ43SNE2vmQd1TC6su6fVxmHfU3Yj4LElt6fVVXzlZ8ZP7PwNI1ofVnVoeLElUw40GjTBWRu1nMUGxbcabQSYt_0W00)


<details><summary>Развернуть код </summary>

```plantUML
@startuml
left to right direction

skinparam packageStyle rectangle

actor Руководитель
actor Диспетчер
actor Исполнитель

package "Модуль Отчёты" {
usecase "Сформировать отчёт" as UC_Report
usecase "Фильтровать/Детализировать отчёт" as UC_Filter
usecase "Экспортировать отчёт\n(PDF/XLSX)" as UC_Export
usecase "Уведомление о готовности" as UC_Notify
usecase "Анализ трудозатрат\nи материалов" as UC_Analyze
usecase "Создать задание\nна основе отчёта" as UC_CreateTask
usecase "Получить задание" as UC_ReceiveTask
}

'Связи Руководителя

Руководитель -u-> UC_Report
Руководитель -u-> UC_Analyze
Руководитель -u-> UC_Export
Руководитель -u-> UC_Notify

'Связи Диспетчера

Диспетчер --> UC_Report
Диспетчер --> UC_Filter
Диспетчер --> UC_Export

Диспетчер --> UC_Notify
Диспетчер --> UC_CreateTask

'Связи Исполнителя

Исполнитель -d-> UC_ReceiveTask

'Взаимосвязи между прецедентами

UC_CreateTask .> UC_Report : «использует»
UC_CreateTask .> UC_Filter : «использует»

UC_ReceiveTask .> UC_CreateTask : «порождено»

@enduml

```

</details>


### Таблица

|п/п|Поле 1|Поле 2|Описание| 
|---|---|---|---|
|---|---|---|---|




## <a id="title6"> 6. Пользовательские сценарии. Описание и Sequence диаграммы </a>

### UC‑01: Регистрация аварийной заявки через веб‑интерфейс «Личного кабинета»

| Поле               | Описание                                                                                                    |
|--------------------|------------------------------------------------------------------------------------------------------------|
| **Номер**          | **UC‑01**                                                                                                       |
| **Название**       | **Регистрация аварийной заявки через веб‑интерфейс «Личного кабинета»**                                        |
| **Действующие лица** | Абонент (Владелец квартиры), Система АДС                                                                 |
| **Предусловия**    | Абонент авторизован в Личном кабинете АДС. В профиле пользователя существует хотя бы одно «помещение» (улица, дом, тип, номер, опционально ФИО и телефон). |
| **Триггер**        | Пользователь нажал кнопку «Новая заявка» → «Аварийная служба»                                              |
| **Основной поток** | 1. Пользователь нажимает кнопку «Новая заявка». <br>2. Система переходит к форме создания заявки (если черновика нет или пользователь отказался от него). <br>3. Пользователь выбирает из списка ранее сохранённых помещений и заполняет поля формы (причина обращения, комментарий - опционально, прикрепление файлов - опционально). <br>4. При неактивности более 30 с или покидании страницы - система сохраняет текущие данные заявки в черновик. <br>5. Пользователь нажимает «Отправить» → система: <br> • Проверяет корректность полей (см. Альтернативные потоки). <br> • При успешной валидации формирует объект заявки с привязкой к выбранному помещению и цене. <br> • Отправляет данные в модуль АДС по REST API. <br> • Получает от АДС номер заявки и примерное время ответа. <br> • Отображает эти данные пользователю. <br> • Удаляет сохранённый черновик. |
| **Альтернативные потоки** | 3-a) Если размер вложения превышает лимит → Система предлагает уменьшить файл или отправить без вложений.<br>5-a) Если обязательные поля не заполнены → Система подсвечивает ошибки и не сохраняет до исправления.<br>5-b) Если произошла ошибка связи с модулем АДС - заявка сохраняется в черновики, показывается уведомление “Сервис недоступен, попробуйте позже”. |
| **Постусловие**    | Заявка зарегистрирована в АДС, абонент видит статус «Принято в обработку», диспетчер получает уведомление.  |


![SVG](https://www.plantuml.com/plantuml/svg/bLRDRXfN5DxVfxXYXINYjkgkagjKxQxTLTbrOwKiBBbWcMdNW6kQAfP8h4XPL8s3yW83WJ0mCFCAvxv2dwJVTu-kVCS38juWvjxpSxxlVEVCFEqbfvV9xx-TMsEIi-IyRR-npxv_yjMnbVUoa8-IkO4RkhwaReJ_OojB_1tBJDQIMJUmKaeX6rculs6-bGo_6ykh4PznjpBcz7dIlRGDUILJ76nvuOQsARUIIofpFES8CAh5SkEZXZtjsMUzzgMvG9rdpyykJZi9Gls3sxyGvgMiB4f94JbZP3Vq7Z_z-C1-ea1OdQGMbRoHYRVyxeUVZJaviV8MGKftvGQojkvFAO1vurvMyPwS6CDYx9DlaG9KoR_m-WIB8P7R1fuBsAPLejA6_MzqImByNH-sAnHBAwJBtHL2J645fiuJZRdoj6nvNxXhyW-mh-6aa85zWSCjio7QsbXhMH7gOdsix0xt2qJ9OVCfz0Rd9SuBd1UIupn3Ss-icYB7ca1em4BLnU8d1tOMZBGf7JmuqUo5prrbvHP5JaaXCDyzCb_3jCzxRR30PjQ0IXhgaHcJA3CaVazrZLtKu8gQMLhjk1jIf_kwRjgTNocH65PTgIXBkQKkCxQfffQ30MJ9VfUKAklRxrpD8uNo4CLgSZ9JcH4PKsb8fZmoHidGeAzemtFLiATRBHUMhjefdT2WXpLjkHnO38uoObSMyRJ1AVzdLHAh7NX7OwtwNfoxOZHzFNarMahwSbQXKtGKJJ1rXjCGai8BXnGVaRWRqkQkUKcTwCEERicCohLAd6nqR-a0kx4ntOj4nmowz3oL4KiG4wSufmfh4wArVdHzZFwIW5Hx0Fy5PKx2-JV5zHoFEc9-DxodRBrm-lSfKgkDuaYu5pZav4XE8edPUt_cWh18gK1l44cdDUG9axTpXK2Q2mxKh19lfRbhyE_e3xmp0e7rFEJtzXouC7H1eV4Y3CQxjWFRU7nyh6l7ZIWVpW9yl88qetl1NGgpU1OUcwdvzPTGB2pMFdpOPhZV1ld6kyfT4xDArUk_P0hLyoFVCh6xqXzU7UymKsC6YvKE5nq1Dmv4n9D2aprBSWvy96oeHHQKX7-7hriQ14Mes8eAe4ntEEfK1tep56lJpmPz0zVJyarDeebBsoPpPHF2B5biIy6e1gSuNH6h7Yufl7ZZAtsJUaEhZCkitk3CXr4TQZ1yAYWn2vqSVUDK8pNtV1ArAakRhvjMz8bqn5oC7wKv_FaLOlec5VV8jfgUNd7S0vCNWhs6h_eTNjdLP5KcLFPzWbTh5OdAATq1-0FlK0_ZvV429y2IRjeZIMiD_i1cq6dlj9fEDsdRxX_0Ga0jv3JoDfGRQk_7d5S-J59gH4NxIqScX419kW4bg--0hHkJ8Xe6eZWh71vtrK2ptZn4mcKROUPEejuiQpNcAVxYmzpy3m00)


<details><summary>Развернуть код </summary>

@startuml 

title : UC-01. Регистрация заявки с помещением и ценой

actor "Абонент (Владелец помещения)" as User
participant "Личный кабинет" as LK
participant "Система АДС" as ADS

== Запуск формы заявки ==

User -> LK : Нажатие "Новая заявка" → "Аварийная служба"

alt Найден сохранённый черновик
    LK -> User : Предложение: продолжить редактирование или начать заново
    User -> LK : Выбор "Продолжить редактирование"
else Нет черновика или выбран "Начать заново"
    LK -> User : Показ пустой формы заявки
end

== Выбор помещения и причины ==

User -> LK : Выбор помещения из списка
User -> LK : Выбор причины обращения (с автопоиском)

LK -> LK : Автоматическое определение категории и стоимости заявки
LK -> User : Отображение стоимости (если заявка платная)

== Заполнение дополнительных данных ==

User -> LK : Ввод комментария

opt Прикрепление файлов
    User -> LK : Загрузка фото/видео/аудио
    alt Размер файла превышает лимит
        LK -> User : Предложение уменьшить файл или продолжить без вложений
        User -> LK : Подтверждение
    end
end

== Автосохранение черновика ==

...Процесс не завершён...
LK -> LK : Автосохранение черновика (30 сек неактивности или выход)

== Отправка заявки ==

User -> LK : Нажатие "Отправить"

alt Обязательные поля не заполнены
    LK -> User : Подсветка ошибок, запрет отправки
else Ошибка связи с АДС
    LK -> User : "Сервис недоступен, попробуйте позже"
    LK -> LK : Сохранение заявки в черновики
    
end

LK -> ADS : Передача заявки (с помещением, причиной, ценой)
    ADS -> ADS : Регистрация заявки, присвоение номера
    ADS -> LK : Подтверждение приёма
    LK -> User : Отображение номера заявки и времени ответа
    ADS -> ADS : Уведомление диспетчера
    LK -> LK : Удаление черновика
note over User,ADS
Заявка зарегистрирована в АДС\nСтатус: "Принято в обработку", Диспетчер уведомлён
end note

@enduml
</details>

### UC‑02: Оставление отзыва о выполненной заявке через веб‑интерфейс «Личного кабинета»

| Поле               | Описание                                                                                                    |
|--------------------|------------------------------------------------------------------------------------------------------------|
| **Номер**          | UC‑02                                                                                                       |
| **Название**       | Оставление отзыва о выполненной заявке через веб‑интерфейс «Личного кабинета»                              |
| **Действующие лица** | Абонент (Владелец квартиры), Система АДС                                                                 |
| **Предусловия**    | Абонент авторизован в Личном кабинете АДС. Заявка пользователя в статусе «Выполнено».                      |
| **Триггер**        | Пользователь переходит в раздел «Мои заявки» и нажимает кнопку «Оставить отзыв» рядом с выполненной заявкой.|
| **Основной поток** | 1. Система отображает форму для отзыва (оценка от 1 до 5 звёзд, фото и комментарий). <br>2. Абонент выбирает оценку. <br>3. Абонент заполняет текстовый комментарий (опционально). <br>4. Абонент прикрепляет фото/видео/аудио (опционально). <br>5. Пользователь нажимает кнопку «Отправить». <br>6. Система сохраняет отзыв в базе данных и привязывает его к заявке. <br>7. Система показывает сообщение об успешной отправке отзыва. |
| **Альтернативные потоки** | 5-a) Если оценка не выбрана → Система не позволяет отправить форму и подсвечивает обязательное поле.<br>5-b) Если произошла ошибка при отправке отзыва (например, ошибка сети) → Система сообщает о сбое и предлагает повторить попытку. |
| **Постусловие**    | Отзыв сохранен в системе, доступен сотрудникам УК для анализа качества обслуживания. Абонент может видеть свой оставленный отзыв рядом с заявкой. |

### UC‑03: Выполнение Заявки Исполнителем

| Поле               | Описание                                                                                                    |
|--------------------|------------------------------------------------------------------------------------------------------------|
| **Номер**          | UC‑03                                                                                                       |
| **Название**       | Выполнение Заявки Исполнителем                                                                              |
| **Действующие лица** | Исполнитель, Система АДС                                                                                   |
| **Предусловия**    | Исполнитель авторизован в системе. Заявка заведена в Системе и назначена на Исполнителя.                    |
| **Триггер**        | Работы выполнены                                                                                            |
| **Основной поток** | 1. Исполнитель выполняет поиск Заявки в Системе.<br>2. Исполнитель нажимает кнопку «Заявка выполнена».<br>3. Система выводит интерфейс с предложением добавить файлы фото-видео фиксации и полем ввода комментария.<br>4. Исполнитель заполняет форму и нажимает «Подтвердить».<br>5. Система изменяет статус заявки на «Выполнена» и возвращает подтверждение. |
| **Альтернативные потоки** | 3-a) Исполнитель отказывается добавлять файлы:<br> • Система позволяет продолжить без вложений.<br>4-a) Если формат или размер файлов не соответствует требованиям:<br> • Система отображает ошибку и предлагает исправить.<br>4-b) Если поле комментария осталось пустым (если оно обязательно):<br> • Система подсвечивает поле и не позволяет отправить форму.<br>5-a) Если произошла ошибка при обновлении статуса заявки (например, сбой связи):<br> • Система отображает сообщение об ошибке и предлагает повторить попытку.<br> • Заявка остаётся в статусе «Выполняется». |
| **Постусловие**    | Статус заявки изменён на «Выполнена», данные фото-видео и комментарий сохранены в системе.                 |


> бар активации не указан так как подразумевается синхронное взаимодействие

![Выполнение заявки](https://www.plantuml.com/plantuml/svg/fLRDQjjS4DtVfxXuxS07twwB4kWpz06KE0k3wmHRMMGNsGcqEE0s51eAJJ7jhXl5jHB5Fmha2MRUg6T6aInTMx7J7n8aTCwPcJD7Lzdj-bx7FtxNCiPl-gq3-yhMthxP-Uz_IvSye0TAQ4OBYl0JKsJf2uKyf35DAQvPOxnz_x1ZQtJ5GOwDkGVyZ2zgrklQ_SEstp5xXyVjXjSv4IWj1C2dV0ROFGUMFj9d6Ydwk6cEq4zpltdajNsWHv0BL71EOH7PFUcQXkTxUrxt0BXF5DAT82QuMA34WC-ByCQUCTgAtNcDAXYJlbCYuZIrOEPJ6Jm41FA2mRZqmAUKSB149KA9rqmyDA21ZMf_GmPBkNgnx644g130BCcanV9nAc5uB2YTFfjxcjh5FRwmu5GmNSU-WNNxn7hyLSW2V1yxQGaVPvihdr42V-RSbxqbT8DdOoX4QijGdeTqJpCy6iCq2t92S_oFD4CXk80XXIqVMJne8GdharYIHyyHzt9n7bH9qxsn-5Sm8LjghkzE0Q55sIIPUGB5iKIU9Ya7tZpRRO9BDOe788RIBmSyTCOGfS8OBsxs1kNk79DVEi3FL4xW84CbjhYN5Sy5xwXBDAR200PNEl12-ovd-PhVG-n6FD14qczG-hZ22rgIhEDnyIr3ZEMcd2Cji2cBb6GrkUywAVYhWh9Qu0P8V1vpJ_s8CybUpX7PrBAlwv9cPR4yJDkXA6s-BeubQXlcBEnorRMdYIOSwA9wMGif8wfuTGhsWLFLzh_RjoQ95M_SrbQs6wPyL5yN4HGkapwm72n34w9YNFd6HpGtwNcYotAIAFAnRahsieoOX39GZHxtiO6mz4LPtTI84bttX-Lt5RS53ocgfzKYccZGRtFagZbRxOU3pJNTlOdCjg7-eGTP135n9bfdKkIOfELA7yphdAErIlYIfNf8oU5qkVhLgUkiV2ujvc7R-h3Fly7PJHumvo2yfKd1INTO7ZfRto0GOpfj9wCxNZqty7RlvqDLSNsLTl5B_WZy0m00)


<details><summary>Развернуть код </summary>

```plantUML

@startuml

title : "UC-03 Выполнение Заявки" 

actor "Исполнитель" as contr
boundary "Интерфейс АДС" as ui
participant "Система АДС" as sys
database "База данных АДС" as db

contr -> ui : Поиск заявки
ui -> sys : Запрос заявок исполнителя
sys -> db : Запрос заявок исполнителя
db -> db
db --> sys : Список заявок
sys --> ui : Список заявок
ui --> contr : Показать список заявок

contr -> ui : Нажать «Заявка выполнена»
ui --> contr : Показать форму добавления файлов и комментария

alt 

else Исполнитель добавляет файлы и комментарий
    contr -> ui: Заполнить форму и нажать «Подтвердить»
else Исполнитель отказывается добавлять файлы
    contr -> ui: Заполнить форму без файлов и нажать «Подтвердить»
else Формат или размер файлов некорректен
    sys --> ui : Ошибка загрузки файлов, запрос исправления
    ui --> contr : Показать ошибку
    contr -> ui : Исправить файлы и повторить отправку
else Комментарий обязателен, но не заполнен
    sys --> ui: Подсветить поле комментария, запретить отправку
    ui --> contr : Показать ошибку
    contr -> ui : Заполнить комментарий и повторить отправку
end

ui -> sys : Отправка формы с файлами и комментарием

alt 
else Ошибка при обновлении статуса заявки
    sys --> ui: Сообщение об ошибке, предложение повторить
    ui --> contr : Показать сообщение об ошибке
    contr -> ui: Повторить отправку
else Успешное обновление статуса
    sys -> db : Обновить статус заявки на «Выполнена», сохранить файлы и комментарий
    db -> db
    db --> sys : Подтверждение обновления
    sys --> ui : Подтверждение изменения статуса на «Выполнена»
    ui --> contr : Показать подтверждение
end
@enduml

```
</details>


### UC‑04: Закрытие Заявки
> При закрытии Заявки контрольные функции выполняются исключительно Диспетчером. Дополнительных проверок Cистемой не производится

| Поле               | Описание                                                                                                    |
|--------------------|------------------------------------------------------------------------------------------------------------|
| **Номер**          | UC‑04                                                                                                      |
| **Название**       | Закрытие Заявки                                                                                            |
| **Действующие лица** | Диспетчер, Система АДС                                                                                     |
| **Предусловия**    | Диспетчер авторизован в системе. Заявка заведена в Системе и находится в статусе «Выполнена».               |
| **Триггер**        | Ежедневно по расписанию. |
| **Основной поток** | 1. Диспетчер выполняет поиск Заявки или списка Заявок в Системе.<br>2. Диспетчер проверяет полноту и корректность сведений от Исполнителя в соответствии с внутренним регламентом АДС.<br>3. Диспетчер нажимает кнопку «Закрыть Заявку».<br>4. Система изменяет статус заявки на «Закрыта» и возвращает подтверждение.<br><br>|
| **Альтернативные потоки** |4-a) Если произошла ошибка при обновлении статуса заявки (например, сбой связи):<br> • Система отображает сообщение об ошибке и предлагает повторить попытку.<br> • Заявка остаётся в статусе «Выполнена». ||
| **Негативный сценарий** |2-a) Если данные, предоставленные Исполнителем, некорректны или неполные:• Диспетчер переводит Заявку в статус «На уточнение»|
| **Постусловие**    | Заявка имеет статус «Закрыта», изменения сохранены, пользователь видит подтверждение.                    |



### UC‑05: Формирование задания исполнителю на основе отчёта об аварии

| Поле               | Описание                                                                                                    |
|--------------------|------------------------------------------------------------------------------------------------------------|
| **Номер**          | UC‑05                                                                                                     |
| **Название**       | Формирование задания исполнителю на основе отчёта об аварии                                                 |
| **Действующие лица** | Основной актор: Диспетчер АДС <br> Второстепенные акторы: Модуль «Отчёты», Модуль «Задания», Исполнитель |
| **Предусловия**    | - Диспетчер авторизован в системе АДС.<br>- В системе зарегистрированы аварийные заявки.<br>- Модуль «Отчёты» доступен и функционирует корректно. |
| **Триггер**        | Диспетчер получает запрос на устранение аварии или необходимость анализа текущей ситуации для распределения задач. |
| **Основной поток** | 1. Диспетчер открывает модуль «Отчёты».<br>2. Формирует отчёт по аварийным заявкам за определённый период или по конкретному адресу.<br>3. Анализирует отчёт, определяя приоритетные заявки и необходимые ресурсы.<br>4. Переходит в модуль «Задания».<br>5. Создаёт новое задание, указывая:<br> • Тип работ (например, сантехнические, электрические).<br> • Адрес выполнения.<br> • Сроки выполнения.<br> • Необходимые материалы и инструменты.<br> • Ответственного исполнителя.<br>6. Сохраняет задание и отправляет уведомление исполнителю.<br>7. Исполнитель получает уведомление и подтверждает получение задания. |
| **Альтернативные потоки** | 7.1. Отчёт не содержит актуальных данных:<br> • Диспетчер проверяет корректность фильтров и параметров отчёта.<br> • При необходимости обращается в техническую поддержку.<br>7.2. Нет доступных исполнителей:<br> • Диспетчер откладывает создание задания до появления свободных ресурсов.<br> • Или перераспределяет задачи между имеющимися исполнителями.<br>7.3. Исполнитель отклоняет задание:<br> • Диспетчер получает уведомление об отклонении.<br> • Назначает другого исполнителя или пересматривает детали задания. |
| **Постусловие**    | Задание создано и направлено исполнителю. Исполнитель подтверждает получение или сообщает об отказе.        |


### UC‑06: Формирование отчёта по заявкам за выбранный период

| Поле               | Описание                                                                                                    |
|--------------------|------------------------------------------------------------------------------------------------------------|
| **Номер**          | UC‑06                                                                                                      |
| **Название**       | Формирование отчёта по заявкам за выбранный период                                                         |
| **Действующие лица** | Руководитель компании                                                                                    |
| **Предусловия**    | Пользователь авторизован в системе и имеет права доступа к отчётам                                         |
| **Триггер**        | Руководитель хочет проанализировать работу диспетчеров и исполнителей за прошедший месяц                   |
| **Основной поток** | 1. Руководитель заходит в модуль «Отчёты».<br>2. Выбирает тип отчёта - «Сводка по заявкам».<br>3. Устанавливает временной диапазон (например, с 01.03.2025 по 31.03.2025).<br>4. Нажимает кнопку «Сформировать».<br>5. Система собирает и отображает отчёт в виде таблиц и диаграмм.<br>6. Руководитель просматривает отчёт и при необходимости экспортирует его в PDF. |
| **Альтернативные потоки** | 6А. Вместо отчёта по всем домам, руководитель указывает конкретный адрес. Система выдает отчёт по конкретному дому.<br>6Б. Если данных за выбранный период нет - отображается уведомление: «Заявки не найдены». |
| **Постусловие**    | Отчёт сформирован и доступен для анализа и экспорта.                                                      |



![Формирование отчета по заявкам](https://www.plantuml.com/plantuml/svg/hLJDRjD04BxlKwno0eaSkUI0AiGH3i0JBFKUB9acYhUSSLFQGv6gIeXS43yg3s1ALt4Jntc5cLVWIVZ6DlAsTGwHE2IAlVFzp7opsKkTcRh3jubIBdQ9rICze9zKyNiggS1tHLUKqveAyXglZ_YKB_Y8SaqRgZGjAETpb2nHLDQF6a3F6P_poK0fi-_6KqtVUOOISE5pJGK8FAtuevf0FDwF9-R0GVUBdA8I9w4MO0DjKltAJiPJzs8S7IPMHSQPDoQrW5rGtWXVrqxNVCOVQi2pfqfjazR39o6XD4vpu3VICsSQH7bWucvhqbZypZXxsvKoYTFqjKF9a4GUT4imUyYlyLJo37QR7xjvl9I1y2bOV9FAg1LfsVIVuy-FLOW22oO1xEkNpuUqw7eSXV4LTplie-swbj7Q9BNtcxtY3DRA5YbhyJ_SGEqWQiSx3yiG4zr0oqlk2ip3dg5z-hSOv3kLYfRgdhMjKO3b1n_tN0nXlGatvG4mEVsY5SfE-EoHfjyepm4knFB3TcxppePqWStOvluRppYJsA439a-Bvew83b2H3LFPgQDBlFHjKAjkeS8HjK5io4Ew48hQxQt1KrMd0oVzjs8Ff_YB-Gi0)

<details><summary>Развернуть код </summary>

```plantUML
@startuml
title : "Формирование отчёта по заявкам за месяц"

actor Руководитель
participant "Модуль отчётов" as ReportModule
database "База данных" as DB

Руководитель -> ReportModule : Запрос на отчёт за месяц
activate ReportModule

alt Отчёт по конкретному дому

Руководитель -> ReportModule : Уточнение: по дому №5
ReportModule -> DB : SQL-запрос: заявки за месяц по дому №5

activate DB

else Отчёт по всем домам
ReportModule -> DB : SQL-запрос: заявки за месяц

end

alt Заявки найдены
DB --> ReportModule : Данные заявок

ReportModule -> Руководитель : Сформированный отчёт (таблицы, графики)
else Заявок нет
DB --> ReportModule : Пустой результат
deactivate DB

ReportModule -> Руководитель : Уведомление: заявок за период не найдено
end

deactivate ReportModule
@enduml
```
</details>




